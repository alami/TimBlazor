@page "/E0502Pizzas"
@rendermode InteractiveServer
@using Microsoft.AspNetCore.WebUtilities
@inject NavigationManager NavManager
<content>
    <h1>Buy a Pizza</h1>

    <p>I want to order a: @PizzaName</p>

    <a href=@HomePageURI>Home Page</a>
    <p>I want to add this topping: <b> @ToppingName </b></p>
    <button class="btn" @onclick="NavigateToPaymentPage">
        Buy this pizza!
    </button>


</content>
@code {
    [Parameter]
    public string PizzaName { get; set; }

    public string HomePageURI { get; set; }
    private string ToppingName { get; set; }

    //https://localhost:7107/pizzas0502?extratopping=Pineapple

    protected override void OnInitialized()
    {
        HomePageURI = NavManager.BaseUri;
        var uri = NavManager.ToAbsoluteUri(NavManager.Uri);
        if (QueryHelpers.ParseQuery(uri.Query).TryGetValue("extratopping", out var extraTopping))
        {
            ToppingName = System.Convert.ToString(extraTopping);
        }
    }
    private void NavigateToPaymentPage()
    {
        NavManager.NavigateTo("checkout");
    }
}